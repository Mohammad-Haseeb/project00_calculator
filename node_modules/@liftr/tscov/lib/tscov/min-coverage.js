"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getMinCoverage = void 0;
const tslib_1 = require("tslib");
const fs = tslib_1.__importStar(require("fs"));
const util = tslib_1.__importStar(require("util"));
const path = tslib_1.__importStar(require("path"));
async function getMinCoverage(argv) {
    let existsAsync = util.promisify(fs.stat);
    let readFileAsync = util.promisify(fs.readFile);
    let minCoverage;
    const packageJsonPath = path.resolve(process.cwd(), 'package.json');
    if (await existsAsync(packageJsonPath)) {
        const currentPackageJson = JSON.parse((await readFileAsync(packageJsonPath)).toString());
        if (currentPackageJson.typeCoverage && currentPackageJson.typeCoverage.minCoverage) {
            minCoverage = currentPackageJson.typeCoverage.minCoverage;
        }
    }
    if (argv['m'] || argv['min-coverage']) {
        minCoverage = argv['m'] || argv['min-coverage'];
    }
    return minCoverage;
}
exports.getMinCoverage = getMinCoverage;
